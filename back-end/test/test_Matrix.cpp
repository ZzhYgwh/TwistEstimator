#include <iostream>
#include <Eigen/Dense>
#include <sstream>
#include <vector>

int main() {
    // 这是原始数据（假设从文件或字符串读取）
    const std::string data = R"(
        24.5472 419.6 -10.9343 -2477.66 213.238 31.0752 -31.3265 -1148.64 41.3179 -2452.15 -92.2332 -196.775 2203.84 62.7029 150.115 2723.76 -183.799 15.5527 -23.6082 -380.425 -10.2975 32.0093 1137.62 -45.2306
        419.6 29626.8 3910.69 -132523 24496.2 4367.05 -224.328 -65623.1 -10822.1 -240816 -12014.2 -13407.8 189410 7106.86 9647.81 183942 -19588.4 -606.601 -112.111 -31278.2 -5690.18 -12.5843 69760.7 10115.7
        -10.9343 3910.69 742.94 -6678.99 4141 1014.5 3.661 -6321.66 -2354.54 -36388.7 -1860.84 -1920.67 25614.4 969.838 1288.53 17462.6 -3249.53 -382.379 88.7406 -4802.58 -927.166 -70.8237 7554.21 2159.53
        -2477.66 -132523 -6678.99 -2.27638e+06 -238403 -111414 27108.2 -231832 113640 1.64405e+06 80092.4 80798.5 -821279 -29555.3 -44218.4 -624398 79132.7 8656.59 -4025.7 242270 3218.09 -5233.31 -228988 -35564.2
        213.238 24496.2 4141 -238403 16475.6 -134.582 1347.71 -80780 -6580.72 -157583 -8223 -9432.24 160710 6212.72 7841.92 261365 -13098.8 2560.24 -356.173 -17713.1 -6749.91 -1369.17 80312.7 6904.14
        31.0752 4367.05 1014.5 -111414 -134.582 -2122.43 865.965 -27022.5 396.269 29344.4 1605.32 -106.902 26643.8 914.375 1520.16 298718 10349.1 8468.29 -484.078 5869.38 -2754.88 -2292.15 56829.2 -4838.26
        -31.3265 -224.328 3.661 27108.2 1347.71 865.966 -147.85 4902.09 -766.421 -9920.71 -556.906 -244.277 -873.246 -12.5486 -82.4952 -39941.9 -2015.14 -1293.08 117.587 -1557.49 225.419 246.481 -6980.94 1048.1
        -1148.64 -65623.1 -6321.66 -231832 -80780 -27022.5 4902.09 62445 33085.5 828331 41954.5 39209.3 -417735 -15649 -21328 890708 110453 43250.2 -1839.27 117264 3586.17 -10410.4 54907.9 -50071.3
        41.3179 -10822.1 -2354.54 113640 -6580.72 396.269 -766.421 33085.5 4501.58 66837.9 3450.77 4076.48 -72115.1 -2795.59 -3503.39 -166013 2907.76 -2808.71 27.275 7529.14 3611.25 1128.48 -40131.2 -3587.53
        -2452.16 -240817 -36388.4 2.01333e+06 -157102 -2075 -7223.44 691998 72746.3 3.27843e+12 1.71589e+11 1.04525e+11 -1.64703e+06 -67387.1 -73271.3 2.02052e+13 1.05752e+12 6.44199e+11 -2.53746e+10 5.35326e+11
        -92.2353 -12014.2 -1860.83 62624.4 -10116.1 -1221.96 -135.662 28793.4 4752.55 7.6951e+09 4.02753e+08 2.45342e+08 -86627.9 -3773.99 -3417.73 4.74288e+10 2.48238e+09 1.51217e+09 -5.95584e+07 1.25651e+09
        -196.776 -13407.8 -1920.66 115282 -8232.17 -378.622 -331.293 38581.5 3652.26 1.77486e+11 9.28939e+09 5.65873e+09 -80553.3 -2721.83 -4674.22 1.09386e+12 5.72512e+10 3.48752e+10 -1.37372e+09 2.89812e+10
    )";

    // 将数据按行分割
    std::istringstream stream(data);
    std::string line;
    std::vector<std::vector<double>> matrix_data;

    // 逐行读取数据
    while (std::getline(stream, line)) {
        std::istringstream line_stream(line);
        double value;
        std::vector<double> row;
        // 按空格分割每一行的元素
        while (line_stream >> value) {
            row.push_back(value);
        }
        matrix_data.push_back(row);
    }

    // 创建 Eigen::MatrixXd，并将数据填充到矩阵中
    Eigen::MatrixXd mat(matrix_data.size(), matrix_data[0].size());

    // 将数据赋值到 Eigen 矩阵
    for (size_t i = 0; i < matrix_data.size(); ++i) {
        for (size_t j = 0; j < matrix_data[i].size(); ++j) {
            mat(i, j) = matrix_data[i][j];
        }
    }

    // 打印输出矩阵
    std::cout << "Eigen Matrix:\n" << mat.rows() << ", " << mat.cols() << std::endl;

    Eigen::SelfAdjointEigenSolver<Eigen::MatrixXd> saes(mat);

    Eigen::MatrixXd eigen_vectos = saes.eigenvectors();

    std::cout << "eigen_vectos size:\n" << eigen_vectos.rows() << ", " << eigen_vectos.cols() << std::endl;
    std::cout << "eigen_vectos:\n" << eigen_vectos << std::endl;


    return 0;
}
